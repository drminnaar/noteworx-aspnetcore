version: '3'
services:
   db:
      container_name: db
      image: postgres
      restart: always
      environment:
         - POSTGRES_USER=postgres
         - POSTGRES_PASSWORD=password
         - POSTGRES_DB=postgres
      ports:
         - 5432:5432
      networks:
         - notenet
   db-admin:
      container_name: db-admin
      image: dpage/pgadmin4
      restart: always
      environment:
         - PGADMIN_DEFAULT_EMAIL=admin@noteworx.com
         - PGADMIN_DEFAULT_PASSWORD=password
      ports:
         - 8081:80
      networks:
         - notenet   
   noteworx-demo:
      container_name: noteworx-demo
      image: drminnaar/noteworx-demo:${TAG:-latest}
      restart: always
      depends_on:
         - db
      build:
         context: './src'
         dockerfile: Dockerfile
      ports:
         - 8080:80
      networks:
         - notenet
networks:
   notenet: